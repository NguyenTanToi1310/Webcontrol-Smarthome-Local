<body>
    <div class="background-device-page">
        <div class="container">
            <div class="row">
                <div class="col d-flex " *ngFor="let device of devices">
                    <div class="box">
                        <div *ngIf="device.type === 'normal-light'">
                            <div class="tag-header">
                                <h1>{{device.ot_nickname}}</h1>
                                <h4>{{device.deviceId}}</h4>
                            </div>
                            <hr>
                            <div class="tag-content">
                                <h2 class="row d-flex" *ngIf="device.state; else elseStateDevice">Trạng thái: Đang bật</h2>
                                <ng-template #elseStateDevice><h2 class="row d-flex">Trạng thái: Đang tắt</h2></ng-template>
                                <h2 class="row d-flex">Độ sáng: {{device.brightness}}</h2>
                            </div>
                        </div>

                        <div *ngIf="device.type === 'switch'">
                            <div class="tag-header">
                                <h1>{{device.ot_nickname}}</h1>
                                <h4>{{device.deviceId}}</h4>
                            </div>
                            <hr>
                            <div class="tag-content">
                                <h2 class="row d-flex" *ngIf="device.state; else elseStateDevice">Trạng thái: Đang bật</h2>
                                <ng-template #elseStateDevice><h2 class="row d-flex">Trạng thái: Đang tắt</h2></ng-template>

                                <h2 class="row d-flex" *ngIf="device.switch_type==='light'; else elseSwitchType_1">Sử dụng cho: Đèn</h2>
                                <ng-template #elseSwitchType_1>
                                    <h2 class="row d-flex" *ngIf="device.switch_type==='fan'; else elseSwitchType_2">Sử dụng cho: Quạt</h2>
                                    <ng-template #elseSwitchType_2>
                                        <h2 class="row d-flex">Sử dụng: Thiết bị khác</h2>
                                    </ng-template>
                                </ng-template>
                            </div>
                        </div>

                        <div *ngIf="device.type === 'sensor-th'">
                            <div class="tag-header">
                                <h1>{{device.ot_nickname}}</h1>
                                <h4>{{device.deviceId}}</h4>
                            </div>
                            <hr>
                            <div class="tag-content">
                                <h2 class="row d-flex" *ngIf="device.stream.active; else elseStateDevice">Trạng thái: Kích hoạt</h2>
                                <ng-template #elseStateDevice><h2 class="row d-flex">Trạng thái: Đang tắt</h2></ng-template>
                                <h2 class="row d-flex">Nhiệt độ: {{device.temp}}&ordm;C</h2>
                                <h2 class="row d-flex">Độ ẩm: {{device.humi}}%</h2>
                            </div>
                        </div>

                        <div *ngIf="device.type === 'color-light'">
                            <div class="tag-header">
                                <h1>{{device.ot_nickname}}</h1>
                                <h4>{{device.deviceId}}</h4>
                            </div>
                            <hr>
                            <div class="tag-content">
                                <h2 class="row d-flex" *ngIf="device.state; else elseStateDevice">Trạng thái: Đang bật</h2>
                                <ng-template #elseStateDevice><h2 class="row d-flex ">Trạng thái: Đang tắt</h2></ng-template>
                                <h2 class="row d-flex">Độ sáng: {{device.brightness}}</h2>
                                <h2 class="row d-flex" class="color-state">Màu đèn: 
                                    <div class="color-state-box" [ngStyle]="{'background-color': device.color}">{{device.color}}</div>
                                </h2>
                                <h2 class="row d-flex" *ngIf="device.sleep; else elseSleep">Chế độ: Giấc ngủ</h2>
                                <ng-template #elseSleep>
                                    <h2 class="row d-flex" *ngIf="device.burning; else elseBurning">Chế độ: Lửa cháy</h2>
                                    <ng-template #elseBurning>
                                        <h2 class="row d-flex" *ngIf="device.party; else elseParty">Chế độ: Bửa tiệc</h2>
                                        <ng-template #elseParty>
                                            <h2 class="row d-flex" *ngIf="device.rainbow; else elseColor">Chế độ: Cầu vòng</h2>
                                            <ng-template #elseColor>
                                                <h2 class="row d-flex">Chế độ: Theo màu</h2>
                                            </ng-template>
                                        </ng-template>
                                    </ng-template>
                                </ng-template>
                            </div>
                        </div>
                        <div *ngIf="device.type === 'fan'">
                            <div class="tag-header">
                                <h1>{{device.ot_nickname}}</h1>
                                <h4>{{device.deviceId}}</h4>
                            </div>
                            <hr>
                            <div class="tag-content">
                                <h2 class="row d-flex" *ngIf="device.state; else elseStateDevice">Trạng thái: Đang bật</h2>
                                <ng-template #elseStateDevice><h2 class="row d-flex">Trạng thái: Đang tắt</h2></ng-template>
                                <h2 class="row d-flex">Mức độ: {{ device.fanspeed }}</h2>
                            </div>
                        </div>
                        <div *ngIf="device.type === 'lock'">
                            <div class="tag-header">
                                <h1>{{device.ot_nickname}}</h1>
                                <h4>{{device.deviceId}}</h4>
                            </div>
                            <hr>
                            <div class="tag-content">
                                <h2 class="row d-flex" *ngIf="device.state; else elseStateDevice">Trạng thái: Đang khóa</h2>
                                <ng-template #elseStateDevice><h2 class="row d-flex">Trạng thái: Đang mở</h2></ng-template>
                            </div>
                        </div>
                        <div class="dieukhienBotton">
                            <!-- control -->
                            <button id="dieukhienBotton" mat-flat-button (click)="openDialog(device)">Điều khiển</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>